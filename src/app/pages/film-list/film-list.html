<div class="page">
  <div class="header">
    <div>
      <h2>Film</h2>
      <p class="muted">Vælg en film for at se tider og booke sæder.</p>
    </div>

    <div class="search">
      <input
        type="text"
        placeholder="Søg efter titel…"
        [(ngModel)]="query"
        (ngModelChange)="onQueryChange($event)"
        name="query"
      />
    </div>
  </div>

  @if (filteredMovies$ | async; as movies) {
    @if (movies.length === 0) {
      <p>Ingen film matcher din søgning.</p>
    } @else {
      <div class="grid">
        @for (m of movies; track m.id) {
          <a class="card" [routerLink]="['/film', m.id]">
            <div class="title">{{ m.title }}</div>

            <div class="meta">
              <span class="chip">
                {{ m.genres.length ? m.genres.join(', ') : 'Ukendt genre' }}
              </span>
              <span class="chip">Varighed: {{ m.durationMinutes }} min</span>
            </div>

            <div class="cta">Se detaljer →</div>
          </a>
        }
      </div>
    }
  }
</div>
