<div class="page">
  <div class="header">
    <div>
      <h2 class="section-title">Film</h2>
      <p class="section-subtitle">Vælg en film for at se tider og booke sæder.</p>
    </div>

    <input
      class="input search"
      placeholder="Søg efter titel…"
      [(ngModel)]="query"
      (ngModelChange)="onQueryChange($event)"
    />
  </div>

  @if (filteredMovies$ | async; as movies) {
    @if (movies.length === 0) {
      <div class="card empty">Ingen film matcher søgningen.</div>
    } @else {
      <div class="grid">
        @for (m of movies; track m.id) {
          <a class="card movie-card" [routerLink]="['/film', m.id]">
            <div class="title">{{ m.title }}</div>

            <div class="meta">
              <span class="chip">
                {{ m.genres.length ? m.genres.join(', ') : 'Ukendt genre' }}
              </span>
              <span class="chip">Varighed: {{ m.durationMinutes }} min</span>
            </div>

            <div class="cta">Se detaljer →</div>
          </a>
        }
      </div>
    }
  }
</div>
